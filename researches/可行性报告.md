# 可行性报告

> **灵活组合的操作系统模块和框架—[ArceOS](https://github.com/rcore-os/arceos)**

### 理论依据

##### 1、组件化操作系统

（此处主要阐述组件化操作系统的历史、优势和发展现状）

##### 2、Unikernal的思想

（描述Unikernal的含义、作用和应用）

##### 3、操作系统的组成部分

（列举操作系统的组成部分，简要描述各组成部分的用途和研究热点）

##### 4、中断与驱动

（讲解驱动的原理、需要配图）

##### 5、指令集

（说明指令集的类型、作用、流行指令集的类别、的优缺点和应用范围）

### 技术依据

##### 1、Rcore和ArceOS项目

（介绍二者的概况和关系，总结二者的文档，并配图说明）

##### 2、Rust编程语言

（描述Rust语言的优势和使用方法）

##### 3、Qemu虚拟机

（介绍Qemu虚拟机的原理和实现，配以截图说明）

##### 4、交叉编译与构建

（描述交叉编译的实现方式、以及交叉编译的方法；描述make、cargo等自动化构建工具）

### 创新点

##### 1、践行组件化OS的思想

​	通过更换若干个高内聚、低耦合的独立组件，彰显组件化OS的优势，有利于代码的复用和优化，还能更好地适应不同用户和场景的需求。

##### 2、完善ArceOS的功能

​	本工作引入先进的算法和技术，例如新的系统算法、IO模式、驱动程序，增加著名开源框架ArceOS的功能，可以实现更加快速、安全、可靠的操作ArceOS，为开源社区做出贡献。

##### 3、增强ArceOS跨平台能力

​	随着科技的不断发展，人们对操作系统的跨平台能力越来越高。开发更多架构、更多Qemu硬件的支持，可以提高ArceOS的可移植性和兼容性，满足ArceOS使用者的需求。

### 概要设计报告

##### 1、创新内核算法，更换系统组件

- 内存分配

  目前该项目利用Bitmap，实现了Buddy、Slab两种算法，涵盖了Linux的主流内存的分配方法。然而，当前项目中存在IdAllocator的接口而不存在IdAllocator的实现。因此，我们计划实现IdAllocator。【相关箱子：allocator、slab_allocator】同时，不同架构的页表结构不同，因此我们计划在更多架构上支持页表级的分配【相关箱子：page_table、page_table_entry；相关架构：aarch、rsicv、x86_64】

- 文件系统

  目前，项目实现了设备文件系统、虚拟文件系统提供文件操作的上层支持。【相关箱子：axfs_devfs、axfs_vfs、axfs】。目前，虚拟文件系统提供了/dev/null和/dev/zero的实现；我们计划实现更多的虚拟设备，如/dev/random；普通文件系统提供了FAT的实现，我们计划增加ext的实现。

- 进程调度

  目前，项目定义了了进程调度器的接口，实现了“先来先服务”和”轮询调度“两种内存调度算法。因此我们计划实现更多内存调度算法，包括优先级调度算法、时间片轮转调度算法、多级反馈队列轮转算法等，并对这些算法进行性能测试。

##### 2、对多种架构提供支持

​		目前，ArceOS支持的架构包括三种：aarch、rsic-v、x86_64。我们计划实现mips架构的系统，并提升aarch、rsic-v、x86_64三种架构的兼容度。这就要求我们：

- 修改硬件适配【相关箱子：axhal，page*】
- 完善Qemu虚拟机的相关支持
- 提供交叉编译的文档教程以供参考

##### 3、（高阶·可选）实现中断驱动的设备IO

​	MMIO（Memory Mapped Input & Output）和中断都可以用于CPU与外设之间的通讯。目前ArceOS只支持MMIO结合轮询的方法访问外设，因此我们计划在有余力的情况下，实现终端驱动的设备IO，提升系统对外设的控制能力。

##### 4、（高阶·可选）开发ArceOS更多驱动

​	目前，ArceOS的驱动部分主要定义了公共驱动接口和虚拟io驱动接口，并基于此实现了网卡、分块（包括内存硬盘、虚拟文件系统）、渲染的驱动。我们计划基于两套接口实现更多驱动、例如键鼠、蓝牙等驱动程序。【相关箱子：driver*、axdriver、axnet、axdisplay】

##### 5、（高阶·可选）移植更多应用，测试ArceOS的功能

​	目前，ArceOS项目实现了若干系统测试，并通过sqlite.h库移植了sqlite数据库软件。因此，我们计划借鉴Github的开源代码，为ArceOS移植git、ssh、busybox等软件，提升ArceOS的可用性。【相关箱子：apps/\*】

### 参考资料

[rcore-os/arceos: An experimental modular OS written in Rust.](https://github.com/rcore-os/arceos)

[ArceOS 项目PPT](https://learningos.github.io/os-lectures/oslabs/biglabs.html#1)

[Index of crates](http://rcore-os.cn/arceos/)

[Linux 操作系统原理 — 内存 — 内存分配算法](http://www.taodudu.cc/news/show-306484.html)

[设备文件系统devfs详解 - 微波EDA网](http://ee.mweda.com/rd/29217.html)

[Writing an OS in Rust (First Edition)](https://os.phil-opp.com/edition-1/)

